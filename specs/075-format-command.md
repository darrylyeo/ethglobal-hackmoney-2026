# Spec 075: Format command

When the user says **"format"** (or "format the code", "format my changes", etc.), apply repository formatting to the requested scope. Source of truth: `.cursor/agents/formatter.md` and specs 041, 056.

## Scope

- Apply formatting only to files in scope (files changed in the conversation, or paths the user specifies). If no files were changed, ask which path to format or use the file(s) currently in context.
- Manual formatting to repo preferences. Svelte section spacing (two empty lines between sections and between comment groups in `<script>`) is manually enforced. Do not run Prettier or any other formatter.

## Execution

1. **Scope:** Every file changed or created in the conversation (or user-specified paths).
2. **Manual formatting:** Fix each file to match repo preferences per formatter.md: TypeScript (single quotes, no statement semicolons, implicit returns, inline single-use vars/types, multi-line and ternary style, extensions in imports), Svelte (section order, two empty lines between sections and comment groups, one prop per line, Svelte 5 only), CSS (semicolons, semantic selectors, data-attribute variants). Inline all single-use variables and types.
3. **Section spacing:** Manually enforce exactly two blank lines between Svelte sections and between comment groups in `<script>`.

## Acceptance criteria

- [x] On "format", scope is defined (changed files or user path).
- [x] Each file in scope is formatted by hand to formatter.md / specs 041, 056.
- [x] Svelte section spacing is applied by hand (no script).
- [x] No Prettier or other formatter is run.

## Status

Complete. 2026-02-26: Section spacing script removed; manually enforced. Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075 ninth): All 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075 eighth): All 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; deno task format runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075 seventh): All 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; deno task format runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075 sixth): All 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; deno task format runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075 fifth): All 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; deno task format runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075 fourth): All 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; deno task format runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075 again): All 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; deno task format runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075): All 4 AC confirmed—scope (changed files or user path) and manual formatting to formatter.md/specs 041, 056 in .cursor/rules/format.mdc; deno task format runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075 again): All 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; deno task format runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify mode—no incomplete specs; re-verify 075): All 4 AC confirmed—scope (changed files or user path) and manual formatting to formatter.md/specs 041, 056 in .cursor/rules/format.mdc; `deno task format` runs scripts/_svelte-section-spacing.ts; no Prettier. Deno test 55 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-21 (PROMPT_build execute one spec, re-verify 075): all 4 AC confirmed—scope and manual formatting in .cursor/rules/format.mdc; `deno task format` added (runs scripts/_svelte-section-spacing.ts); rule updated to run format task for Svelte section spacing; no Prettier. Deno test 54 passed; Vitest phase pre-existing failure (npm:@tanstack/svelte-db). Previous: Re-verification 2026-02-07 (PROMPT_build execute one spec, no incomplete specs; re-verify 075): all 4 AC confirmed in .cursor/rules/format.mdc (scope, manual formatting to formatter.md/specs 041 and 056, deno task format, no Prettier). test:unit 44 Deno + 159 Vitest passed.
